<!DOCTYPE html>
<html>
<head>

  <meta charset="utf-8">
  <link rel="SHORTCUT ICON" href="../static/img/logo1.png">
  <title>Anti-phishing Club</title>

  <link href="../static/css/show.min.css" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.min.css" crossorigin="anonymous">
  <link href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i" rel="stylesheet">
  <link href="../static/css/show.css" rel="stylesheet">
  <link href="../static/css/bootstrap-select.min.css" rel="stylesheet" type="text/css">
  <link href="../static/css/fileinput.css" rel="stylesheet">
</head>

<body class="bg-gradient-primary">

  <div class="container">

    <!-- Outer Row -->
    <div class="row justify-content-center">

      <div class="col-xl-10 col-lg-12 col-md-9">

        <div class="card o-hidden border-0 shadow-lg my-5">
          <div class="card-body p-0">

                  <div class="text-center">
                  <img class="mt-5" src="../static/img/logo1.png" style="height:180px">
                  <!--<h1 class="h1 text-gray-900 mt-1 mb-0">welcome to depression detection</h1>-->
                  </div>


            <!-- Nested Row within Card Body -->
            <div class="row">
              <div class="col-lg-6">
                 <div class="p-5">
                  <div class="text-center">
                    <h1 class="h4 text-gray-900 mb-4">Input to Check!</h1>
                  </div>
                  <form class="user" id="Inputform">

                    <div class="form-group">
                        <input type="text" name="age" class="form-control form-control-user" id="exampleInputAge" placeholder="input the url.">
                    </div>
                    <div class="form-group">
                        <input type="text" name="education" class="form-control form-control-user" id="exampleInputEducation" placeholder="input the email address.">
                    </div>
                  </form>
                    <hr>
                    <div>
                        <div class="text-left">
                        <h1 class="h5 text-gray-900 mb-2">Phishing Detection Result:</h1>
                        </div>
                        <div class="form-group" id="outcome" style="padding: 5px;min-height: 215px;background: #eee;">
                            <div id="score"></div>
                            <div id="level"></div>
                            <div id="suggestion"></div>
                        </div>
                    </div>
                    <hr>
                    <div class="text-center">
                    <a class="small" href="https://github.com/skks11/Depression-Detection-WebService">Anti-phishing Club</a>
                    </div>
                  </div>
              </div>

              <div class="col-lg-6">
                <div class="p-5">
                  <div class="text-center">
                    <h1 class="h4 text-gray-900 mb-4">Upload Attachments to Check!</h1>
                  </div>
                  <form class="user mb-4" id="Fileform">
                    <div>
                        <input id="input-b3" name="input-b3[]" type="file" class="file" multiple data-show-upload="false" data-show-caption="true" data-msg-placeholder="Select {files} for upload...">
                    </div>
                  </form>
                  <div style="text-align:center" >
                    <button type="button" class="btn btn-primary" style="width:348px" id="btnSubmit">
                      submit
                    </button>
                    </div>

                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  <script src="../static/js/jquery.min.js"></script>
  <script src="../static/js/bootstrap.bundle.min.js"></script>
  <script src="../static/js/jquery.easing.min.js"></script>
  <script src="../static/js/sb-admin-2.min.js"></script>
  <script src="../static/js/bootstrap-select.min.js"></script>
  <script src="../static/js/sortable.js"></script>
  <script src="../static/js/fileinput.js"></script>
  <script src="../static/js/piexif.js"></script>

  <script>
      $("#btnSubmit").click(function (){
        var formData = new FormData();
        formData.append('fileData', document.getElementById('input-b3').files[0]); //upload file -img?
        // formData.append('data', $("#Inputform").serialize());
        formData.append('sex', $("#sexSelect").val());
        formData.append('Age', $("#exampleInputAge").val());                //age
        formData.append('Married', $("#marriedSelect").val());
        formData.append('education_level', $("#exampleInputEducation").val());    //education
        formData.append('total_members', $("#exampleInputMember").val());
        formData.append('living_expenses', $("#exampleInputExpenses").val());
        formData.append('other_expenses', $("#exampleInputOtherExpenses").val());
        formData.append('incoming_salary', $("#salarySelect").val());
        formData.append('Text1', $("#exampleInputText1").val());
        formData.append('Text2', $("#exampleInputText2").val());
        formData.append('Text3', $("#exampleInputText3").val());
        formData.append('Text4', $("#exampleInputText4").val());
        formData.append('Text5', $("#exampleInputText5").val());
        //formData.append('level',1);
        console.log("formData===",formData)
        // alert("hello");
        $.ajax({
          async: true,
          cache: false,
          type: "POST",
          dataType: "json",
          url: "/data",
          data: formData,
          contentType: false,
          processData: false,
        success: function (data) {
          console.log("data===",data);
          if(data.code == "200")
          {
            if(data.msg.score){
              $('#score').text("Depression Score: "+data.msg.score)
            }
            if(data.msg.level){
              $('#level').text("Depression Level: "+data.msg.level)
            }
            if(data.msg.suggestion){
              $('#suggestion').text("Our Suggestion: "+data.msg.suggestion)
            }
            // $('#outcome').val(JSON.stringify(data.msg))
            /*//return outcome to #outcome
            //window.location.href="index1.0.html"; */
          }
          else
          {
            alert(data.msg);
          }
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
          alert("error");
          /*// window.location.href="login.html"
					// 状态码 */
					console.log("status:" + XMLHttpRequest.status + "\n");
					/* 状态 */
					console.log("readyState:" + XMLHttpRequest.readyState + "\n");
					/* 错误信息*/
					console.log("textStatus:" + textStatus + "\n");
        }
			});
    });
  </script>

</body>
</html>